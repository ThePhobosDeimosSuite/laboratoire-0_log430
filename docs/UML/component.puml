@startuml component
skinparam componentStyle rectangle
skinparam defaultTextAlignment center

package "API Gateway" {
  [Kong]
}

package "Monitoring" {
  [Prometheus]
  [Grafana]
}

package "Shared Code" {
  [shared-utils] as SharedUtils
}


package "Microservices" {
  component Product
  component Sales
  component Stocks
  component Account
  component ShoppingCart
  component OnlineSalesOrchestrator
}

database "ProductDB" as dbProduct
database "SalesDB" as dbSales
database "StocksDB" as dbStocks
database "AccountDB" as dbAccount
database "CartDB" as dbCart


Kong --> Product
Kong --> Sales
Kong --> Stocks
Kong --> Account
Kong --> OnlineSalesOrchestrator

SharedUtils ..> Product
SharedUtils ..> Sales
SharedUtils ..> Stocks
SharedUtils ..> Account
SharedUtils ..> ShoppingCart
SharedUtils ..> OnlineSalesOrchestrator

Product --> dbProduct
Sales --> dbSales
Stocks --> dbStocks
Account --> dbAccount
ShoppingCart --> dbCart


OnlineSalesOrchestrator --> Product
OnlineSalesOrchestrator --> Sales
OnlineSalesOrchestrator --> Stocks
OnlineSalesOrchestrator --> ShoppingCart

Prometheus --> Product
Prometheus --> Sales
Prometheus --> Stocks
Prometheus --> Account
Prometheus --> ShoppingCart
Prometheus --> Checkout

Grafana --> Prometheus

@enduml
